import { utils } from 'ethers'
import { MarketParameterStruct, RiskParameterStruct } from '../../types/generated/@perennial/v2-core/contracts/Market'
import { ProtocolParameterStruct } from '../../types/generated/@perennial/v2-core/contracts/MarketFactory'

export const NewRiskParams: Record<string, RiskParameterStruct> = {
  XRP: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '200',
      adiabaticFee: '1600',
      scale: '860000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '860000000000',
    },
    makerLimit: '2500000000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '450000',
      targetRate: '450000',
      targetUtilization: '670000',
    },
    pController: {
      k: '11520000000',
      min: '-1860000',
      max: '1860000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  ETH: {
    margin: '9500',
    maintenance: '8000',
    takerFee: {
      linearFee: '400',
      proportionalFee: '200',
      adiabaticFee: '1200',
      scale: '600000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '600000000',
    },
    makerLimit: '3010000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '300000',
      targetRate: '300000',
      targetUtilization: '670000',
    },
    pController: {
      k: '18432000000',
      min: '-1750000',
      max: '1750000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  ARB: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '300',
      adiabaticFee: '1800',
      scale: '230000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '230000000000',
    },
    makerLimit: '552630000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '450000',
      targetRate: '450000',
      targetUtilization: '670000',
    },
    pController: {
      k: '10368000000',
      min: '-2190000',
      max: '2190000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  MATIC: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '600',
      adiabaticFee: '2400',
      scale: '570000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '570000000000',
    },
    makerLimit: '1200000000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '450000',
      targetRate: '450000',
      targetUtilization: '670000',
    },
    pController: {
      k: '8640000000',
      min: '-1750000',
      max: '1750000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  SOL: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '400',
      adiabaticFee: '2000',
      scale: '7900000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '7900000000',
    },
    makerLimit: '15650000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '450000',
      targetRate: '450000',
      targetUtilization: '670000',
    },
    pController: {
      k: '13824000000',
      min: '-2630000',
      max: '2630000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  BTC: {
    margin: '9500',
    maintenance: '8000',
    takerFee: {
      linearFee: '400',
      proportionalFee: '100',
      adiabaticFee: '1000',
      scale: '34000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '34000000',
    },
    makerLimit: '99000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '300000',
      targetRate: '300000',
      targetUtilization: '670000',
    },
    pController: {
      k: '16128000000',
      min: '-1530000',
      max: '1530000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  'BTC^2': {
    margin: '97500',
    maintenance: '80000',
    takerFee: {
      linearFee: '1500',
      proportionalFee: '1200',
      adiabaticFee: '2800',
      scale: '260000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '260000000',
    },
    makerLimit: '240000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '1800000',
      targetRate: '1200000',
      targetUtilization: '500000',
    },
    pController: {
      k: '8640000000',
      min: '-3070000',
      max: '3070000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  LINK: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '700',
      adiabaticFee: '2600',
      scale: '36000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '36000000000',
    },
    makerLimit: '94740000000',
    efficiencyLimit: '500000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '450000',
      targetRate: '450000',
      targetUtilization: '670000',
    },
    pController: {
      k: '11520000000',
      min: '-2630000',
      max: '2630000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  JUP: {
    margin: '37000',
    maintenance: '32000',
    takerFee: {
      linearFee: '800',
      proportionalFee: '2100',
      adiabaticFee: '5800',
      scale: '360000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '360000000000',
    },
    makerLimit: '250009000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '750000',
      targetRate: '750000',
      targetUtilization: '500000',
    },
    pController: {
      k: '2880000000',
      min: '-3500000',
      max: '3500000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  'ETH^2': {
    margin: '97500',
    maintenance: '80000',
    takerFee: {
      linearFee: '1500',
      proportionalFee: '1200',
      adiabaticFee: '2800',
      scale: '9000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '9000000000',
    },
    makerLimit: '5410000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '1800000',
      targetRate: '1200000',
      targetUtilization: '500000',
    },
    pController: {
      k: '9216000000',
      min: '-3500000',
      max: '3500000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  RLB: {
    margin: '195000',
    maintenance: '160000',
    takerFee: {
      linearFee: '800',
      proportionalFee: '6000',
      adiabaticFee: '13600',
      scale: '360000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '360000000000',
    },
    makerLimit: '384616000000',
    efficiencyLimit: '800000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '750000',
      targetRate: '750000',
      targetUtilization: '550000',
    },
    pController: {
      k: '960000000',
      min: '-7500000',
      max: '7500000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  TIA: {
    margin: '37000',
    maintenance: '32000',
    takerFee: {
      linearFee: '800',
      proportionalFee: '1100',
      adiabaticFee: '3800',
      scale: '30000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '30000000000',
    },
    makerLimit: '12730000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '750000',
      targetRate: '750000',
      targetUtilization: '500000',
    },
    pController: {
      k: '1536000000',
      min: '-3500000',
      max: '3500000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  BNB: {
    margin: '19500',
    maintenance: '16000',
    takerFee: {
      linearFee: '600',
      proportionalFee: '300',
      adiabaticFee: '1800',
      scale: '1700000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '1700000000',
    },
    makerLimit: '1170000000',
    efficiencyLimit: '800000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '550000',
      targetRate: '550000',
      targetUtilization: '550000',
    },
    pController: {
      k: '4608000000',
      min: '-1860000',
      max: '1860000',
    },
    minMargin: '15000000',
    minMaintenance: '10000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  XAU: {
    margin: '9500',
    maintenance: '8000',
    takerFee: {
      linearFee: '300',
      proportionalFee: '200',
      adiabaticFee: '1000',
      scale: '4500000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '4500000000',
    },
    makerLimit: '450000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '85000',
      targetRate: '85000',
      targetUtilization: '500000',
    },
    pController: {
      k: '130000000000',
      min: '-500000',
      max: '500000',
    },
    minMargin: '50000000',
    minMaintenance: '40000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  MOG: {
    margin: '95000',
    maintenance: '80000',
    takerFee: {
      linearFee: '1500',
      proportionalFee: '10000',
      adiabaticFee: '23000',
      scale: '50000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '50000000000',
    },
    makerLimit: '50000000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '750000',
      targetRate: '750000',
      targetUtilization: '500000',
    },
    pController: {
      k: '4608000000',
      min: '-3000000',
      max: '3000000',
    },
    minMargin: '50000000',
    minMaintenance: '40000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
  JPY: {
    margin: '9500',
    maintenance: '8000',
    takerFee: {
      linearFee: '200',
      proportionalFee: '100',
      adiabaticFee: '600',
      scale: '1500000000000',
    },
    makerFee: {
      linearFee: '100',
      proportionalFee: '0',
      scale: '1500000000000',
    },
    makerLimit: '150000000000',
    efficiencyLimit: '1000000',
    liquidationFee: '5000000',
    utilizationCurve: {
      minRate: '0',
      maxRate: '85000',
      targetRate: '85000',
      targetUtilization: '500000',
    },
    pController: {
      k: '200000000000',
      min: '-300000',
      max: '300000',
    },
    minMargin: '50000000',
    minMaintenance: '40000000',
    staleAfter: '40',
    makerReceiveOnly: false,
  },
}

export const NewMarketParameter: MarketParameterStruct = {
  fundingFee: utils.parseUnits('0.10', 6), // Overriden in migration to current market value
  interestFee: utils.parseUnits('0.10', 6), // Overriden in migration to current market value
  makerFee: utils.parseUnits('0', 6),
  takerFee: utils.parseUnits('0.0002', 6),
  riskFee: utils.parseUnits('0.25', 6),
  maxPendingGlobal: 12,
  maxPendingLocal: 6,
  closed: false,
  settle: false,
  maxPriceDeviation: utils.parseUnits('0.15', 6),
}

export const NewProtocolParameter: ProtocolParameterStruct = {
  minScale: utils.parseUnits('0.04', 6),
  maxFee: 30000,
  maxLiquidationFee: 50000000,
  maxCut: 130000,
  maxRate: 15000000,
  minMaintenance: 4000,
  minEfficiency: 250000,
  referralFee: utils.parseUnits('0.40', 6),
  maxStaleAfter: 3600, // 1 hour
}

export const VaultMinimumDeposit = utils.parseUnits('20', 6)
